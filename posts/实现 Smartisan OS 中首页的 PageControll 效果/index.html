<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Coder ç°æ¡‘"/><link rel="canonical" href="https://coder.linsyorozuya.com/posts/%E5%AE%9E%E7%8E%B0%20Smartisan%20OS%20%E4%B8%AD%E9%A6%96%E9%A1%B5%E7%9A%84%20PageControll%20%E6%95%88%E6%9E%9C"/><meta name="twitter:url" content="https://coder.linsyorozuya.com/posts/%E5%AE%9E%E7%8E%B0%20Smartisan%20OS%20%E4%B8%AD%E9%A6%96%E9%A1%B5%E7%9A%84%20PageControll%20%E6%95%88%E6%9E%9C"/><meta name="og:url" content="https://coder.linsyorozuya.com/posts/%E5%AE%9E%E7%8E%B0%20Smartisan%20OS%20%E4%B8%AD%E9%A6%96%E9%A1%B5%E7%9A%84%20PageControll%20%E6%95%88%E6%9E%9C"/><title>å®ç° Smartisan OS ä¸­é¦–é¡µçš„ PageControll æ•ˆæœ | Coder ç°æ¡‘</title><meta name="twitter:title" content="å®ç° Smartisan OS ä¸­é¦–é¡µçš„ PageControll æ•ˆæœ | Coder ç°æ¡‘"/><meta name="og:title" content="å®ç° Smartisan OS ä¸­é¦–é¡µçš„ PageControll æ•ˆæœ | Coder ç°æ¡‘"/><meta name="description" content="Stay Foolish, Always Foolish"/><meta name="twitter:description" content="Stay Foolish, Always Foolish"/><meta name="og:description" content="Stay Foolish, Always Foolish"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Coder ç°æ¡‘"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">Coder ç°æ¡‘</a><p class="description">Stay Foolish, Always Foolish</p><nav><ul><li><a href="/">æœ€æ–°</a></li><li class="selected"><a href="/posts">Code</a></li><li><a href="/products">äº§å“</a></li><li><a href="/about">å…³äº</a></li></ul></nav></div></header><div class="wrapper"><article><h1>å®ç° Smartisan OS ä¸­é¦–é¡µçš„ PageControll æ•ˆæœ</h1><div class="metadata"><ul class="tag-list"><li class="tag variant-0"><a href="/tags/ios">iOS</a></li></ul><span class="date">1æœˆ 2, 2016</span></div><div class="content"><blockquote><p>åœ¨çœ‹ <a href="http://kittenyang.com/pagecontrol/"><code>kittenyang:åœ¨iOSä¸­å®ç°Smartisan OSä¸­é¦–é¡µçš„PageControllæ•ˆæœ</code></a> å’Œ <a href="http://www.cnblogs.com/ludashi/p/4994520.html"><code>è§†é”™è§‰ï¼šä»ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„è‡ªå®šä¹‰æ§ä»¶è¯´èµ·</code></a> è¿™ä¸¤ç¯‡æ–‡ç« æ„Ÿè§‰å¯ä»¥æ›´å¥½çš„å®ç°å®ç° Smartisan OS ä¸­é¦–é¡µçš„ PageControl æ•ˆæœã€‚</p></blockquote><p>é”¤å­çš„æ•ˆæœï¼š</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/2014-11-10-22_03_58.gif"/><p>é¦–å…ˆ kittenyang å®ç°çš„ï¼Œå½“äº®ç‚¹åˆ’è¿‡ä¸¤ä¸ªæš—ç‚¹çš„ä¸­é—´æ˜¯è¿˜æ˜¯æ˜¾ç¤ºçš„</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/2014-11-10-22_43_44.gif"/><p>å†çœ‹è§†é”™è§‰æ–‡ç« é‡Œçš„æ•ˆæœï¼š</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/545446-20151125131300812-815351965.gif"/><p>æœ€ç»ˆå®ç°çš„æ•ˆæœï¼š</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/8nbghgj.gif"/><h5>å®ç°åŸç†</h5><p>é¦–å…ˆä»æ•ˆæœçœ‹é”¤å­çš„äº®ç‚¹ï¼Œåƒæ˜¯ä»å­”çš„ä¸‹æ–¹ç§»åŠ¨ã€‚æ‰€ä»¥ç»™äººæ„Ÿè§‰æ˜¯ä¸Šé¢æŒ–äº†ä¸€æ’å­”ï¼Œäº®ç‚¹åœ¨åœ°é“ç§»åŠ¨æ‰€ä»¥ä¸¤ä¸ªç©ºä¸­é—´çš„åœ°æ–¹çœ‹ä¸åˆ°ç§»åŠ¨çš„äº®ç‚¹ã€‚æ‰€ä»¥ä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸€ä¸ª view ç§»åŠ¨æ¥è§£å†³ã€‚</p><p>æ°å·§çœ‹åˆ°å¦ä¸€ç¯‡æ–‡ç« ï¼Œæƒ³åˆ°ä¹Ÿè®¸å¯ä»¥è¯•è¯•ã€‚</p><p><strong>åŸç†å°±æ˜¯ï¼šä½¿ç”¨ mask éšè—å’Œåˆ©ç”¨ç›¸å¯¹ç§»åŠ¨äº§ç”Ÿæ—¶å·®ã€‚</strong></p><p>å®ç°æ­¥éª¤ï¼š</p><ol><li>åœ¨è‡ªå®šä¹‰çš„ <code>LHPageControlview</code> ä¸Šåˆ›å»ºå‡ ä¸ªæœªé€‰ä¸­çŠ¶æ€é¢œè‰²çš„åœ† darkCircleã€‚</li></ol><ol start="2"><li>åœ¨è‡ªå®šä¹‰çš„ <code>LHPageControlview</code> ä¸Šåˆ›å»ºä¸€ä¸ªåœ†å¤§å°çš„ä½†é€æ˜çš„<code>_hightLightView</code>ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åˆ©ç”¨ <code>mask</code> å±æ€§å°†å®ƒå­è§†å›¾ä¸­è¶…å‡º <code>_hightLightView</code> æ˜¾ç¤ºåŒºåŸŸçš„å…¶ä»–é«˜äº®çš„å‡ ä¸ªåœ†è—èµ·æ¥ã€‚</li></ol><p>3.<code>_hightLightView</code> ä¸Šæ·»åŠ  <code>_topHidenHightLightCircles</code> è§†å›¾ï¼Œç„¶ååœ¨ <code>_topHidenHightLightCircles</code> ä¸Šé¢æ·»åŠ ç›¸åº”æ•°é‡çš„é€‰ä¸­çŠ¶æ€çš„åœ†<code>lightCircle</code>ï¼Œæ³¨æ„ä»–ä»¬çš„ä½ç½®ç›¸å¯¹äº <code>LHPageControlview</code> ä¸Šçš„ <code>darkCircle</code>è¦ä¸€ä¸€å¯¹åº”ã€‚</p><p>æ•´ä¸ªæ§ä»¶ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/B8150BBE-FF77-4F04-BFA9-0A682359896E.png"/><p><strong>ç§»åŠ¨çš„æ—¶å€™ï¼Œç§»åŠ¨ <code>_hightLightView</code> çš„åŒæ—¶ <code>_topHidenHightLightCircles</code> å¾€ç›¸åæ–¹å‘ç§»åŠ¨åŒæ ·è·ç¦»ï¼Œè¿™æ ·åœ¨è§†è§‰ä¸Šå°±å¥½åƒ <code>_topHidenHightLightCircles</code> æ˜¯é™æ­¢çš„ï¼Œçœ‹ä¸Šå»åªæ˜¯ <code>_hightLightView</code> åœ¨ç§»åŠ¨ã€‚</strong></p><p><strong>è¿™æ ·å½“ <code>_hightLightView</code> ç§»åŠ¨åˆ°é€‰ä¸­çŠ¶æ€çš„åœ† <code>lightCircle</code> æ—¶ï¼Œç›¸åº”çš„æœªé€‰ä¸­çŠ¶æ€çš„ <code>darkCircle</code> ä¸Šå°±åƒæœ‰é«˜äº®çš„åœ† <code>lightCircle</code> ç§»åŠ¨è¿‡æ¥é®ä½å¹¶æ˜¾ç¤ºã€‚</strong></p><p>ç§»åŠ¨æ—¶å¦‚å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/linsyorozuya/Pics@master/uPic/72D0810E-08D5-4876-BEA1-9D12452BCE7A.png"/><p>ç§»åŠ¨çš„å…³é”®ä»£ç ï¼š</p><pre><code><span class="type">CGFloat</span> scale = distance - (int)distance;
<span class="keyword">if</span> (scale == <span class="number">0</span> &amp;&amp; distance&gt;=<span class="number">1</span>) {
    scale = <span class="number">1</span>;
}

<span class="type">CGFloat</span> moveDistance = distance*(kPageHeight+<span class="number">5</span>);

<span class="type">CGAffineTransform</span> transform = <span class="type">CGAffineTransformIdentity</span>;



transform = <span class="type">CGAffineTransformTranslate</span>(transform, moveDistance, <span class="number">0</span>);


<span class="keyword">if</span> (scale &gt;= <span class="number">0</span> &amp;&amp; scale &lt;= <span class="number">0.2</span>) {
    transform = <span class="type">CGAffineTransformScale</span>(transform, <span class="number">1.0</span>-scale, <span class="number">1.0</span>-scale);
}

<span class="keyword">if</span> (scale &gt; <span class="number">0.2</span> &amp;&amp; scale &lt; <span class="number">0.8</span>) {
    transform = <span class="type">CGAffineTransformScale</span>(transform, <span class="number">0.8</span>, <span class="number">0.8</span>);
}

<span class="keyword">if</span> (scale &gt; <span class="number">0.8</span> &amp;&amp; scale &lt;= <span class="number">1</span>) {
    transform = <span class="type">CGAffineTransformScale</span>(transform, scale, scale);
}


_hightLightView.<span class="property">layer</span>.<span class="property">affineTransform</span> = transform;




transform = <span class="type">CGAffineTransformIdentity</span>;

transform = <span class="type">CGAffineTransformTranslate</span>(transform, -moveDistance, <span class="number">0</span>);

_topHidenHightLightCircles.<span class="property">layer</span>.<span class="property">affineTransform</span> = transform;


</code></pre><p>è¿™æ ·å°±å®ç°äº†åŸºæœ¬æ•ˆæœã€‚</p><p>~æˆ‘åœ¨ä¸­é—´ä¸ºäº†å®ç°ç¼©å°æ•ˆæœï¼Œä½¿ç”¨å®æ—¶æ”¹å˜ _hightLightView layer çš„ cornerRadius å¤§å°ã€‚å¦‚æœæ…¢æ…¢æ‹–åŠ¨ä¼šå‘ç°ä¸­é—´æ˜¯æœ‰äº›é—®é¢˜çš„ã€‚(å¸Œæœ›æŒ‡æ•™æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³• =ã€‚= è°¢è¿‡)~</p><p>è§£å†³<br>è¿˜æ˜¯å¾—è‡ªå·±è§£å†³ã€‚=ã€‚=ã€‚æœ€è¿‘çœ‹åˆ° <code>CGAffineTransform</code> è¿™ä¸ªç±»ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®è‡ªå·±çš„ä¸­å¿ƒç‚¹æ¥è¿›è¡Œç¼©æ”¾å’Œç§»åŠ¨ã€‚çœå»äº†å†å»è®¡ç®—åœ¨çˆ¶ view çš„åæ ‡å»ç§»åŠ¨ã€‚</p><p>Github ä»£ç ï¼š<a href="https://github.com/LinBling/LHPageControlTry"><code>ä¼ é€é—¨</code></a></p></div></article></div><div class="item-bottom-nav"><div><a href="/posts/iOS è‡ªå®šä¹‰æ§ä»¶é€‚åº”å†…å®¹å¤§å°é—®é¢˜" class="item">ğŸ”™Â  iOS è‡ªå®šä¹‰æ§ä»¶é€‚åº”å†…å®¹å¤§å°é—®é¢˜</a></div><div></div></div><footer><p>Copyright Â© 2021 ç°æ¡‘</p><p>Powered by <a href="https://github.com/johnsundell/publish">John Sundell's Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>